<!DOCTYPE html>
<html lang="en">

<head>
    <title>Đăng ký</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>

    <div class="container mt-3">
        <h3>Đăng ký</h3>

        <form id="registerForm" class="was-validated" enctype="multipart/form-data">
            <div class="mb-3 mt-3">
                <label for="taikhoan" class="form-label">Tài khoản:</label>
                <input type="text" class="form-control" id="taikhoan" placeholder="Nhập tài khoản" name="taikhoan" required>
                <div class="valid-feedback">Hợp lệ.</div>
                <div class="invalid-feedback">Vui lòng nhập tài khoản.</div>
            </div>

            <div class="mb-3">
                <label for="matkhau" class="form-label">Mật khẩu:</label>
                <input type="password" class="form-control" id="matkhau" placeholder="Nhập mật khẩu" name="matkhau" required>
                <div class="valid-feedback">Hợp lệ.</div>
                <div class="invalid-feedback">Vui lòng nhập mật khẩu.</div>
            </div>

            <div class="mb-3">
                <label for="email" class="form-label">Email:</label>
                <input type="email" class="form-control" id="email" placeholder="Nhập email" name="email" required>
                <div class="valid-feedback">Hợp lệ.</div>
                <div class="invalid-feedback">Vui lòng nhập email đúng định dạng.</div>
            </div>

            <div class="mb-3">
                <label for="fullname" class="form-label">Họ và tên:</label>
                <input type="text" class="form-control" id="fullname" placeholder="Nhập họ và tên" name="fullname" required>
                <div class="valid-feedback">Hợp lệ.</div>
                <div class="invalid-feedback">Vui lòng nhập họ và tên.</div>
            </div>

            <button type="button" class="btn btn-primary" onclick="registerUser()">Đăng ký</button>
        </form>
    </div>

    <script>
        function registerUser() {
            // Lấy giá trị từ các trường nhập liệu
            var taikhoan = document.getElementById('taikhoan').value;
            var matkhau = document.getElementById('matkhau').value;
            var email = document.getElementById('email').value;
            var fullname = document.getElementById('fullname').value;

            // Gửi dữ liệu đến máy chủ
            fetch('/user/post', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    taikhoan: taikhoan,
                    matkhau: matkhau,
                    email: email,
                    fullname: fullname,
                }),
            })
                .then(response => response.json())
                .then(data => {
                    console.log('Success:', data);
                    alert('Đăng ký thành công! Chuyển đến trang đăng nhập.');
                    window.location.href = "/loginScreen"; // Đường dẫn đến trang đăng nhập
                })
                .catch((error) => {
                    console.error('Error:', error);
                    alert('Đăng ký thất bại!');
                });
        }
    </script>

</body>

</html>
